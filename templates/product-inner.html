{% load static %}
{% load static i18n %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product</title>
    <link rel="icon" type="image/gif" href="{% static 'Images/mercury-logo.png' %}" class="object-contain">
    <meta name="description"
          content="Завод Mercury — производство трубопроводов из полипропилена и полиэтилена в Узбекистане. Гарантия 50 лет. Европейское качество. Доставка по всему Узбекистану.">
    <meta name="keywords"
          content="производство труб Узбекистан, трубы из полипропилена, трубы из полиэтилена, купить трубы Узбекистан, трубы для водоснабжения, трубы для отопления, завод труб Mercury, трубы, Фитинги, Фитинги
        для канализационных труб, Канализационные трубы, Фитинги ППР, пластиковые трубы">
    <meta name="author" content="Завод Mercury">
    <meta property="og:title" content="Производство труб в Узбекистане | Завод Mercury">
    <meta property="og:description"
          content="Трубы из полипропилена и полиэтилена с гарантией 50 лет. Европейское качество от завода Mercury. Доставка по Узбекистану.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://mercury.uz">
    <!-- Librarys -->
    <link rel="stylesheet" href="{% static 'Style/main.css' %}">
    <link rel="stylesheet" href="{% static 'Plugins/aos/aos.css' %}">
    <script src="{% static 'Plugins/Tailwind/tailwind.js' %}"></script>
    <script src="{% static 'Plugins/Tailwind/tailwind.config.js' %}"></script>
    <script src="{% static 'Plugins/Lucide-icon/lucide.min.js' %}"></script>
    <link rel="stylesheet" href="{% static 'Plugins/Swiper/swiper-bundle.min.css' %}">
</head>
<body>
<div class="wrapper">
    <nav class="bg-white shadow-lg duration-300 nav py-4 fixed top-0 left-0 right-0 w-full z-[80] text-white border-b border-white/20">
        <div class="container flex items-center justify-between">
            <a href="{% url 'index' %}" class="md:w-[90px] md:h-[54px] w-20 h-10 block">
                <img src="{% static 'Images/mercury-logo-blue.png' %}" class="w-full h-full object-contain  "
                     alt="Logo Mercury">
            </a>
            <ul class="flex md:items-center max-md:px-12 duration-200 gap-5 max-md:text-xl md:gap-10 max-md:fixed max-md:h-screen max-md:bg-white max-md:py-10 max-md:top-0 z-50  !-right-full max-md:!text-dark max-md:w-[300px] !text-dark nav-lists max-md:flex-col  font-rubik lg:text-lg lg:gap-14 xl:gap-[77px] max-md:pt-[150px] ">
                <a href="{% url 'index' %}" class="w-[90px] h-[54px] block md:hidden absolute top-5 left-5">
                    <img src="{% static 'Images/mercury-logo-blue.png' %}" class="w-full h-full object-contain  "
                         alt="Logo Mercury">
                </a>
                <div class="nav-close md:hidden absolute top-7 right-5 cursor-pointer">
                    <i data-lucide="x"></i>
                </div>
                <div class="w-full flex flex-col items-center md:hidden">
                    <div class="flex items-center  absolute bottom-6  gap-2.5 font-rubik lg:text-lg duration-300 text-dark ">
                        <a href="{% url 'set-language' 'ru' %}"
                           class="{% if request.LANGUAGE_CODE == 'ru' %}text-lightBlue{% endif %} cursor-pointer">
                            Ру
                        </a>
                        <div class="w-[1px] h-4 lg:h-5 bg-black duration-300"></div>
                        <a href="{% url 'set-language' 'uz' %}"
                           class="{% if request.LANGUAGE_CODE == 'uz' %}text-lightBlue{% endif %} cursor-pointer">
                            Uz
                        </a>
                    </div>
                </div>
                <li class="relative before:w-0 hover:before:w-1/2 before:duration-200 before:h-[2px] before:rounded-e before:absolute before:-bottom-1 before:left-1/2 before:bg-white  after:w-0 hover:after:w-1/2 after:duration-200 after:h-[2px] after:rounded-s after:absolute after:-bottom-1 after:right-1/2 after:bg-white">
                    <a href="{% url 'index' %}">{% trans 'Главная' %}</a>
                </li>
                <li class="relative before:w-0 hover:before:w-1/2 before:duration-200 before:h-[2px] before:rounded-e before:absolute before:-bottom-1 before:left-1/2 before:bg-white  after:w-0 hover:after:w-1/2 after:duration-200 after:h-[2px] after:rounded-s after:absolute after:-bottom-1 after:right-1/2 after:bg-white">
                    <a href="{% url 'about' %}">{% trans 'О компании' %}</a>
                </li>
                <li class="relative before:w-0 md:hidden hover:before:w-1/2 before:duration-200 before:h-[2px] before:rounded-e before:absolute before:-bottom-1 before:left-1/2 before:bg-white  after:w-0 hover:after:w-1/2 after:duration-200 after:h-[2px] after:rounded-s after:absolute after:-bottom-1 after:right-1/2 after:bg-white">
                    <a href="{% url 'catalog' %}">{% trans 'Каталог' %}</a>
                </li>
                <li class="max-md:hidden">
                    <div class="flex max-md:flex-col  nav-dropdown  items-center cursor-pointer">
                        <div class="flex gap-1 items-center">
                            <span>{% trans 'Каталог' %}</span>
                            <i data-lucide="chevron-down"></i>
                        </div>
                    </div>
                    <div class="dropdown-item grid max-md:!border-0 grid-rows-[0fr] max-md:text-center md:absolute z-50 top-20 md:top-[87px] bg-white transition-all ease duration-300">
                        <div class="overflow-hidden text-lg font-rubik ">
                            <ul class="flex flex-col max-md:items-center max-md:text-base  items-start dropdown-list gap-3 p-5 text-black max-w-[360px]  ">
                                {% for i in categories %}
                                    <li class="relative before:w-0 hover:text-blue hover:before:w-1/2 before:duration-200 before:h-[2px] before:rounded-e before:absolute before:-bottom-1 before:left-1/2 before:bg-blue  after:w-0 hover:after:w-1/2 after:duration-200 after:h-[2px] after:rounded-s after:absolute after:-bottom-1 after:right-1/2 after:bg-blue">
                                        <a href='{% url 'products' %}?cat={{ i.id }}'>{{ i.name }}</a>
                                    </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </li>
                <li class="relative before:w-0 hover:before:w-1/2 before:duration-200 before:h-[2px] before:rounded-e before:absolute before:-bottom-1 before:left-1/2 before:bg-white  after:w-0 hover:after:w-1/2 after:duration-200 after:h-[2px] after:rounded-s after:absolute after:-bottom-1 after:right-1/2 after:bg-white">
                    <a href="{% url 'contact' %}">{% trans 'Контакты' %}</a>
                </li>
            </ul>
            <div class="flex items-center gap-5 lg:gap-14 ">
                <div class="flex items-center gap-3 lg:gap-5 duration-300 nav-contacts">
                    <div class="nav-search"><i data-lucide="search" class=" w-5 h-5"></i></div>
                    <a href="tel:{{ contract.phone }}" class=""><i data-lucide="phone" class=" w-5 h-5"></i></a>
                </div>
                <i data-lucide="menu" class="navbar-burger cursor-pointer md:hidden"></i>
                <div class="flex items-center max-md:hidden gap-2.5 font-rubik lg:text-lg duration-300 text-white nav-lang">
                    <a href="{% url 'set-language' 'ru' %}"
                       class="{% if request.LANGUAGE_CODE == 'ru' %}text-lightBlue{% endif %} cursor-pointer">
                        Ру
                    </a>
                    <div class="w-[1px] h-4 lg:h-5 bg-white vector duration-300"></div>
                    <a href="{% url 'set-language' 'uz' %}"
                       class="{% if request.LANGUAGE_CODE == 'uz' %}text-lightBlue{% endif %} cursor-pointer">
                        Uz
                    </a>
                </div>

            </div>
        </div>
        <div class="w-screen h-[130vh] absolute top-0 left-0 bg-black/70 z-[5] nav-bg hidden"></div>
    </nav>
    <div class="w-screen fixed search-screen search-panel -bottom-full duration-200 left-0 bg-white z-50">
        <div class="container flex flex-col items-center py-10">
            <div class="w-full flex justify-center gap-2">
                <input type="text" id="search-input" placeholder="{% trans 'Искать' %}..."
                       class="min-w-[250px] md:min-w-[340px] border outline-none rounded-lg p-2"/>
                <button id="search-button"
                        class="bg-commonBlue text-white rounded-lg px-4 py-2 hover:bg-blue-600">
                    <i data-lucide="search" class="w-5 h-5"></i>
                </button>
            </div>
        </div>
        <div class="container h-[70vh] overflow-y-scroll">
            <div id="search-results" class="w-full grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-5">
                <!-- AJAX orqali yuklangan natijalar shu yerga keladi -->
            </div>
        </div>
    </div>
    <main class="min-h-[90vh]">
        <section class="pt-[120px] md:pt-[140px] lg:pt-[165px] pb-[50px] md:pb-[100px] font-rubik">
            <div class="container relative z-20 space-y-5 md:space-y-[30px]">
                <div class="flex flex-wrap  items-center gap-1 md:gap-2 font-rubik">
                    <a href="{% url 'index' %}" class="text-[#8A8A8A]">{% trans 'Главная' %}</a>
                    <i data-lucide="chevron-right" class="w-6 h-6 text-[#8A8A8A]"></i>
                    <a href="{% url 'products' %}?cat={{ product.category_id }}"
                       class="text-[#8A8A8A]">{{ product.category.name }}</a>
                    <i data-lucide="chevron-right" class="w-6 h-6 text-dark"></i>
                    <a href="." class="text-dark">{{ product.name }}</a>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-7 lg:grid-cols-9 gap-7 md:gap-12 lg:gap-[65px]">
                    <div class="w-full md:col-span-3 lg:col-span-4 flex flex-col gap-3">
                        <div class="swiper productSwiper !w-full aspect-[3/2] border rounded-[10px] overflow-hidden">
                            <div class="swiper-wrapper w-full h-full">
                                <div class="swiper-slide w-full h-full">
                                    <img class="w-full h-full object-cover" src="{{ product.image.url }}" alt="">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="md:col-span-4 lg:col-span-5">
                        <h3 class="font-rubik font-medium text-lg md:text-xl lg:text-2xl text-dark pb-3 md:pb-5">
                            {{ product.name }}
                        </h3>
                        <div class="!w-full overflow-x-scroll table-scrolbar">
                            <div class=" rounded-t-lg min-w-[500px] lg:min-w-full overflow-hidden font-rubik text-dark">
                                <div class="w-full bg-lightBlue p-2 lg:p-3 grid grid-cols-4 gap-3 text-white font-medium">
                                    <p>
                                        {% trans 'Размер' %}
                                    </p>
                                    <p class=" relative before:h-full before:w-[2px] before:bg-[#E5E7EB] before:absolute before:-left-2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               ">
                                        {% trans 'Цвет' %}
                                    </p>
                                    <p class=" relative before:h-full before:w-[2px] before:bg-[#E5E7EB] before:absolute before:-left-2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               ">
                                        {% trans 'В упаковке' %}
                                    </p>
                                    <p class=" relative before:h-full before:w-[2px] before:bg-[#E5E7EB] before:absolute before:-left-2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               ">
                                        {% trans 'Код' %}
                                    </p>
                                </div>
                                {% for i in product.tables.all %}
                                    <div class="w-full p-2 lg:p-3 grid grid-cols-4 gap-3 border-y-[0.5px] bg-white">
                                        <p>
                                            {{ i.size }}
                                        </p>
                                        <p>
                                            {{ i.color }}
                                        </p>
                                        <p>
                                            {{ i.in_package }}
                                        </p>
                                        <p>
                                            {{ i.code }}
                                        </p>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="w-full aspect-square md:w-1/2 lg:w-1/3 sm:w-[400px] absolute top-[80px] left-0 z-[2]">
                <img class="w-full h-full object-contain" src="{% static 'Images/mercury-bg.png' %}" alt="Mercury Logo">
            </div>
        </section>
        <section class="pb-[50px] md:pb-[100px] font-rubik">
            <div class="container space-y-5 md:space-y-[30px]">
                <div class="w-full overflow-x-scroll product-tab">
                    <div class="flex justify-between font-medium gap-3 md:gap-7 lg:gap-12 !overflow-x-scroll !w-[550px] md:text-lg lg:text-xl xl:gap-16 min-w-full border-b-[0.5px] border-[#E5E7EB]">
                        <a href="#" class="tab-link" data-tab="description">
                            {% trans 'Описание' %}
                        </a>
                        <a href="#"
                           class="tab-link text-lightBlue relative before:h-0.5 before:bg-lightBlue before:w-full before:absolute before:rounded before:bottom-0"
                           data-tab="specs">
                            {% trans 'Технические характеристики' %}
                        </a>
                        <a href="#" class="tab-link" data-tab="application">
                            {% trans 'Область применения' %}
                        </a>
                    </div>
                </div>
                <div>
                    <div class="tab-content hidden" data-content="description">
                        <div class="space-y-4">
                            <p class="text-dark section-text">{{ product.description|safe }}</p>
                        </div>
                    </div>
                    <div class="tab-content" data-content="specs">
                        <div class="w-full space-y-2">
                            {% for i in product.characters.all %}
                                <div class='text-sm  lg:text-base flex justify-between items-end  w-full '>
                                    <p class='text-currentGray whitespace-nowrap '>{{ i.key }}:</p>
                                    <div class='h-full w-full border-b flex-1 border-dashed'></div>
                                    <p class='text-black max-w-1/2 text-right text-wrap'>{{ i.value }}</p>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="tab-content hidden" data-content="application">
                        <p class="text-dark section-text">{{ product.scope|safe }}</p>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <footer class="bg-dark py-4 md:py-[30px] font-rubik text-white">
        <div class="container flex flex-wrap justify-between gap-y-5  ">
            <div class="w-full space-y-5 md:w-[33%] flex flex-col max-md:items-center">
                <p class=" text-sm leading-5 max-md:text-center"><span
                        class="font-bold">{% trans 'Наш адрес' %}:</span> {{ contract.address }}</p>
                <div class="flex items-center gap-8">
                    <a class="block" href="{{ contract.instagram }}" target="_blank"><i data-lucide="instagram"
                                                                                        class="w-5 h-5"></i></a>
                    <a class="block" href="{{ contract.telegram }}" target="_blank"><img
                            src="{% static 'Images/telegram.svg' %}"
                            alt="Telegram Icon" class="w-5 h-5"></a>
                    <a class="block" href="{{ contract.whatsapp }}" target="_blank"><img
                            src="{% static 'Images/whatsap.svg' %}"
                            alt="Whatsapp Icon" class="w-5 h-5"></a>
                </div>
            </div>
            <div class="flex flex-col items-center gap-1.5 w-full md:w-[33%]">
                <a class="block" href="tel:{{ contract.phone }}">{{ contract.phone }}</a>
                <a class="block" href="mailto:{{ contract.email }}">{{ contract.email }}</a>
            </div>
            <div class="flex flex-col items-center md:items-end w-full gap-1.5 md:gap-5 md:w-[33%] h-full ">
                <div class="flex items-center gap-2 lg:gap-[18px] ">
                    <p>{% trans 'Сайт создан' %} : </p>
                    <a href="https://abduganiev.uz/" target="_blank" class="w-[120px] lg:w-[130px] h-[50px] ">
                        <img src="{% static 'Images/footer-logo.svg' %}" alt="Abduganiev Logo"
                             class="shrink-0  w-full h-full object-contain">
                    </a>
                </div>
                <p>&copy <span class="footer-year"></span>. {% trans 'Все права защищены' %}.</p>
            </div>
        </div>
    </footer>
</div>
<script src="{% static 'Plugins/Lucide-icon/lucide.min.js' %}"></script>
<script src="{% static 'Plugins/aos/aos.js' %}"></script>
<script src="{% static 'Js/index.js' %}"></script>
<script src="{% static 'Plugins/Swiper/swiper-bundle.min.js' %}"></script>
<script>
    function performSearch() {
        const query = document.getElementById('search-input').value;
        if (!query.trim()) return;

        fetch(`/search/?q=${encodeURIComponent(query)}`)
            .then(response => response.json())
            .then(data => {
                const container = document.getElementById('search-results');
                container.innerHTML = '';

                if (data.length === 0) {
                    container.innerHTML = '<p class="text-center w-full py-5 text-gray-500">Ничего не найдено.</p>';
                    return;
                }

                data.forEach(product => {
                    container.innerHTML += `
                    <div class="w-full cursor-pointer aspect-[2/1] relative group rounded overflow-hidden flex flex-col items-center justify-center">
                        <img class="w-full h-full object-cover absolute top-0 group-hover:scale-105 duration-500 left-0 z-[5]" src="${product.image}" alt="${product.name}">
                        <div class="w-full h-full bg-black/40 duration-500 group-hover:bg-black/70 absolute top-0 left-0 z-[6]"></div>
                        <div class="flex font-rubik flex-col items-center text-white z-10 gap-2.5">
                            <h3 class=" font-medium text-center max-w-[392px] text-lg md:text-xl lg:text-2xl">${product.name}</h3>
                            <div class=" opacity-0 group-hover:opacity-100 duration-500">
                                <a href="/products/${product.id}/" class="overflow-hidden flex items-center gap-1 font-rubik font-normal">
                                    <span>Подробнее</span>
                                    <i data-lucide="chevron-right"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                `;
                });

                lucide.createIcons(); // lucide iconlar yangilansin
            });
    }

    // Enter bosilsa ishlaydi
    document.getElementById('search-input').addEventListener('keydown', function (e) {
        if (e.key === 'Enter') {
            e.preventDefault();  // Sahifa reload bo'lishining oldini olamiz
            performSearch();
        }
    });

    // Search icon bosilsa ishlaydi
    document.getElementById('search-button').addEventListener('click', function () {
        performSearch();
    });
</script>
<script>
    const tabLinks = document.querySelectorAll('.tab-link');
    const tabContents = document.querySelectorAll('.tab-content');

    tabLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();

            const selectedTab = link.getAttribute('data-tab');

            // Remove active styles from all tabs
            tabLinks.forEach(l => {
                l.classList.remove(
                    'text-lightBlue',
                    'relative',
                    'before:h-0.5',
                    'before:bg-lightBlue',
                    'before:w-full',
                    'before:absolute',
                    'before:rounded',
                    'before:bottom-0'
                );
            });

            // Hide all tab contents
            tabContents.forEach(content => content.classList.add('hidden'));

            // Show the selected tab content
            const activeContent = document.querySelector(`[data-content="${selectedTab}"]`);
            if (activeContent) {
                activeContent.classList.remove('hidden');
            }

            // Add active styles to the clicked tab
            link.classList.add(
                'text-lightBlue',
                'relative',
                'before:h-0.5',
                'before:bg-lightBlue',
                'before:w-full',
                'before:absolute',
                'before:rounded',
                'before:bottom-0'
            );
        });
    });
</script>
</body>
</html>